<div class="dashboard">
    <div class="col-xs-6 left" dropdown [isOpen]="dropdownOpen" [autoClose]="false" (onShown)="newChannelNamefocus()">
        <button class="btn btn-primary btn-new-channel" #newChannelButton>
            <i class="glyphicon glyphicon-plus"></i> New Channel
        </button>
        <div *dropdownMenu #newChannelMenu class="dropdown-menu new-channel-menu col-md-6 col-xs-10 col-xs-12">
            <form>
                <div class="form-group">
                    <label for="newChannelName">Name</label>
                    <input type="text" [(ngModel)]="name" name="name" class="form-control" #newChannelName id="newChannelName" placeholder="Name">
                </div>
                <div class="form-group">
                    <label for="newChannelDescription">Description</label>
                    <textarea class="form-control" [(ngModel)]="description" name="description" id="newChannelDescription" placeholder="Description"></textarea>
                </div>
                <button (click)="newChannel(name, description)" class="btn btn-primary pull-right">Create</button>
            </form>
        </div>
    </div>
    <div class="col-xs-6 right">
        <button *ngIf="!listing" (click)="listing = !listing" class="btn btn-primany"><i class="glyphicon glyphicon-th-list"></i></button>
        <button *ngIf="listing" (click)="listing = !listing"  class="btn btn-primany"><i class="glyphicon glyphicon-th-large"></i></button>
        <button class="btn btn-primany btn-setting"><i class="glyphicon glyphicon-cog"></i></button>
    </div>
</div>

<div class="channels clearfix">
    <aside class="col-md-2 col-sm-3 col-xs-2">
        <ul class="nav nav-pills nav-stacked" role="tablist">
            <li role="presentation" class="active">
                <a href="#my-channel" aria-controls="my-channel" role="tab" data-toggle="tab" (click)="switchTo('mine')">
                    <i class="fa fa-user-circle-o"></i>
                    <span class="hidden-xs">My channel</span>
                </a>
            </li>
            <li role="presentation">
                <a href="#shared-channel" aria-controls="shared-channel" role="tab" data-toggle="tab" (click)="switchTo('shared')">
                    <i class="fa fa-users"></i>
                    <span class="hidden-xs">Shared with me</span>
                </a>
            </li>
            <li role="presentation" class="disabled">
                <a role="tab">
                    <i class="fa fa-star"></i>
                    <span class="hidden-xs">Starred</span>
                </a>
            </li>
            <li role="presentation" class="disabled">
                <a role="tab">
                    <i class="fa fa-clock-o"></i>
                    <span class="hidden-xs">Recently used</span>
                </a>
            </li>
        </ul>
    </aside>
    <div class="col-md-10 col-sm-9 col-xs-10 tab-content">
        <ng-container *ngIf="(channelsSub | async); let channels; else loadingChannels">
            <ng-container *ngIf="channels.length > 0; then displayChannels; else noChannel"></ng-container>
        </ng-container>
        <ng-template #displayChannels>
            <ng-container *ngIf="listing; then channelsList else channelsGrid"></ng-container>
        </ng-template>
        <ng-template #channelsList>
            <table class="table">
                <thead>
                    <tr>
                        <th>Name</th>
                        <th>Description</th>
                        <th></th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let channel of (channelsSub | async)">
                        <td>{{ channel.name }}</td>
                        <td>{{ channel.description }}</td>
                        <td>
                            <a [routerLink]="['/channel/' + channel.id]" class="btn btn-primary" role="button">Go</a>
                            <button class="btn btn-danger"
                                    *ngIf="channel.allowToDelete"
                                    (click)="removeChannel(channel)"
                                    role="button">
                                Delete
                            </button>
                        </td>
                    </tr>
                </tbody>
            </table>
        </ng-template>
        <ng-template #channelsGrid>
            <div class="col-md-3" *ngFor="let channel of channelsSub | async">
                <div class="thumbnail">
                    <div class="caption">
                        <h3>{{ channel.name }}</h3>
                        <p>{{ channel.description }}</p>
                        <p>
                            <a [routerLink]="['/channel/' + channel.id]" class="btn btn-primary" role="button">Go</a>
                            <button class="btn btn-danger"
                                    *ngIf="channel.allowToDelete"
                                    (click)="removeChannel(channel)"
                                    role="button">
                                Delete
                            </button>
                        </p>
                    </div>
                </div>
            </div>
        </ng-template>
        <ng-template #noChannel>
            <h1>No Channel.</h1>
        </ng-template>
        <ng-template #loadingChannels>
            <h3>Loading ...</h3>
        </ng-template>
    </div>
</div>
